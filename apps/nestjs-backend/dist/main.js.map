{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { EnvService } from '@common/env/env.service';\nimport { Logger, ValidationPipe } from '@nestjs/common';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { FastifyAdapter, NestFastifyApplication } from '@nestjs/platform-fastify';\nimport cookieParser from 'cookie-parser';\nimport compression from '@fastify/compress';\n\nasync function bootstrap() {\n  const app = await NestFactory.create<NestFastifyApplication>(AppModule, new FastifyAdapter());\n  const logger = new Logger('NestApplication');\n  const env = app.get(EnvService);\n  const port = env.get<number>('PORT') || 3000\n\n  app.enableCors({\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    preflightContinue: false,\n    optionsSuccessStatus: 204,\n  });\n\n  app.use(cookieParser())\n\n  app.useGlobalPipes(new ValidationPipe());\n\n  // Swagger\n  const document = new DocumentBuilder()\n    .setTitle('Questly API')\n    .setDescription('The Questly API description')\n    .setVersion('1.0')\n    .build();\n  const documentSwagger = SwaggerModule.createDocument(app, document);\n  SwaggerModule.setup('docs', app, documentSwagger);\n\n  await app.register(compression);\n  await app.listen(port, () => logger.debug(`ðŸš€ App listening on http://localhost:${port}/docs`));\n}\n\nbootstrap();\n"],"names":["bootstrap","app","NestFactory","create","AppModule","FastifyAdapter","logger","Logger","env","get","EnvService","port","enableCors","origin","methods","preflightContinue","optionsSuccessStatus","use","cookieParser","useGlobalPipes","ValidationPipe","document","DocumentBuilder","setTitle","setDescription","setVersion","build","documentSwagger","SwaggerModule","createDocument","setup","register","compression","listen","debug"],"mappings":";;;;sBAA4B;2BACF;4BACC;wBACY;yBACQ;iCACQ;qEAC9B;iEACD;;;;;;AAExB,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS,EAAE,IAAIC,+BAAc;IAC1F,MAAMC,SAAS,IAAIC,cAAM,CAAC;IAC1B,MAAMC,MAAMP,IAAIQ,GAAG,CAACC,sBAAU;IAC9B,MAAMC,OAAOH,IAAIC,GAAG,CAAS,WAAW;IAExCR,IAAIW,UAAU,CAAC;QACbC,QAAQ;QACRC,SAAS;QACTC,mBAAmB;QACnBC,sBAAsB;IACxB;IAEAf,IAAIgB,GAAG,CAACC,IAAAA,qBAAY;IAEpBjB,IAAIkB,cAAc,CAAC,IAAIC,sBAAc;IAErC,UAAU;IACV,MAAMC,WAAW,IAAIC,wBAAe,GACjCC,QAAQ,CAAC,eACTC,cAAc,CAAC,+BACfC,UAAU,CAAC,OACXC,KAAK;IACR,MAAMC,kBAAkBC,sBAAa,CAACC,cAAc,CAAC5B,KAAKoB;IAC1DO,sBAAa,CAACE,KAAK,CAAC,QAAQ7B,KAAK0B;IAEjC,MAAM1B,IAAI8B,QAAQ,CAACC,iBAAW;IAC9B,MAAM/B,IAAIgC,MAAM,CAACtB,MAAM,IAAML,OAAO4B,KAAK,CAAC,CAAC,qCAAqC,EAAEvB,KAAK,KAAK,CAAC;AAC/F;AAEAX"}