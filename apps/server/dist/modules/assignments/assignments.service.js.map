{"version":3,"sources":["../../../src/modules/assignments/assignments.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { CreateAssignmentDto } from './dto/create-assignment.dto';\nimport { UpdateAssignmentDto } from './dto/update-assignment.dto';\nimport { DatabaseService } from '@common/database/database.service';\nimport { assignments, assignmentsGroups, assignmentsQuestions } from './entities/assignment.entity';\n\n@Injectable()\nexport class AssignmentsService {\n  constructor(private readonly drizzle: DatabaseService) { }\n\n  async create(createAssignmentDto: CreateAssignmentDto, userId: string) {\n    const assignment = await this.drizzle.db.insert(assignments).values({ ...createAssignmentDto, userId });\n    await this.drizzle.db.insert(assignmentsGroups).values(createAssignmentDto.groups.map(g => ({ assignmentId: assignment.id, groupId: g.groupId })));\n    await this.drizzle.db.insert(assignmentsQuestions).values(createAssignmentDto.questions.map(q => ({ assignmentId: assignment.id, questionId: q.questionId })));\n    return assignment;\n  }\n}\n"],"names":["AssignmentsService","create","createAssignmentDto","userId","assignment","drizzle","db","insert","assignments","values","assignmentsGroups","groups","map","g","assignmentId","id","groupId","assignmentsQuestions","questions","q","questionId","constructor"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBAPc;iCAGK;kCACqC;;;;;;;;;;AAG9D,IAAA,AAAMA,qBAAN,MAAMA;IAGX,MAAMC,OAAOC,mBAAwC,EAAEC,MAAc,EAAE;QACrE,MAAMC,aAAa,MAAM,IAAI,CAACC,OAAO,CAACC,EAAE,CAACC,MAAM,CAACC,6BAAW,EAAEC,MAAM,CAAC;YAAE,GAAGP,mBAAmB;YAAEC;QAAO;QACrG,MAAM,IAAI,CAACE,OAAO,CAACC,EAAE,CAACC,MAAM,CAACG,mCAAiB,EAAED,MAAM,CAACP,oBAAoBS,MAAM,CAACC,GAAG,CAACC,CAAAA,IAAM,CAAA;gBAAEC,cAAcV,WAAWW,EAAE;gBAAEC,SAASH,EAAEG,OAAO;YAAC,CAAA;QAC9I,MAAM,IAAI,CAACX,OAAO,CAACC,EAAE,CAACC,MAAM,CAACU,sCAAoB,EAAER,MAAM,CAACP,oBAAoBgB,SAAS,CAACN,GAAG,CAACO,CAAAA,IAAM,CAAA;gBAAEL,cAAcV,WAAWW,EAAE;gBAAEK,YAAYD,EAAEC,UAAU;YAAC,CAAA;QAC1J,OAAOhB;IACT;IAPAiB,YAAY,AAAiBhB,OAAwB,CAAE;aAA1BA,UAAAA;IAA4B;AAQ3D"}