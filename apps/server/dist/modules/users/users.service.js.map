{"version":3,"sources":["../../../src/modules/users/users.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { CreateUserDto } from './dto/create-user.dto';\nimport { UpdateUserDto } from './dto/update-user.dto';\nimport { DatabaseService } from '@common/database/database.service';\nimport { users } from './entities/user.entity';\nimport { eq } from 'drizzle-orm';\n\n@Injectable()\nexport class UsersService {\n  constructor(\n    private readonly drizzle: DatabaseService\n  ) { }\n\n  async create(createUserDto: CreateUserDto) {\n    return await this.drizzle.db.insert(users).values(createUserDto).returning({\n      id: users.id,\n      email: users.email,\n      avatar: users.avatar,\n      firstName: users.firstName,\n      lastName: users.lastName,\n    });\n  }\n\n  async findAll() {\n    return await this.drizzle.db.select().from(users);\n  }\n\n  async findOne(id: string) {\n    return await this.drizzle.db.select().from(users).where(eq(users.id, id));\n  }\n\n  async findOneByEmail(email: string) {\n    return await this.drizzle.db.select().from(users).where(eq(users.email, email));\n  }\n\n  async update(id: string, updateUserDto: UpdateUserDto) {\n    return await this.drizzle.db.update(users).set(updateUserDto).where(eq(users.id, id)).returning();\n  }\n\n  async remove(id: string) {\n    return await this.drizzle.db.delete(users).where(eq(users.id, id)).returning();\n  }\n}\n"],"names":["UsersService","create","createUserDto","drizzle","db","insert","users","values","returning","id","email","avatar","firstName","lastName","findAll","select","from","findOne","where","eq","findOneByEmail","update","updateUserDto","set","remove","delete","constructor"],"mappings":";;;;+BAQaA;;;eAAAA;;;wBARc;iCAGK;4BACV;4BACH;;;;;;;;;;AAGZ,IAAA,AAAMA,eAAN,MAAMA;IAKX,MAAMC,OAAOC,aAA4B,EAAE;QACzC,OAAO,MAAM,IAAI,CAACC,OAAO,CAACC,EAAE,CAACC,MAAM,CAACC,iBAAK,EAAEC,MAAM,CAACL,eAAeM,SAAS,CAAC;YACzEC,IAAIH,iBAAK,CAACG,EAAE;YACZC,OAAOJ,iBAAK,CAACI,KAAK;YAClBC,QAAQL,iBAAK,CAACK,MAAM;YACpBC,WAAWN,iBAAK,CAACM,SAAS;YAC1BC,UAAUP,iBAAK,CAACO,QAAQ;QAC1B;IACF;IAEA,MAAMC,UAAU;QACd,OAAO,MAAM,IAAI,CAACX,OAAO,CAACC,EAAE,CAACW,MAAM,GAAGC,IAAI,CAACV,iBAAK;IAClD;IAEA,MAAMW,QAAQR,EAAU,EAAE;QACxB,OAAO,MAAM,IAAI,CAACN,OAAO,CAACC,EAAE,CAACW,MAAM,GAAGC,IAAI,CAACV,iBAAK,EAAEY,KAAK,CAACC,IAAAA,cAAE,EAACb,iBAAK,CAACG,EAAE,EAAEA;IACvE;IAEA,MAAMW,eAAeV,KAAa,EAAE;QAClC,OAAO,MAAM,IAAI,CAACP,OAAO,CAACC,EAAE,CAACW,MAAM,GAAGC,IAAI,CAACV,iBAAK,EAAEY,KAAK,CAACC,IAAAA,cAAE,EAACb,iBAAK,CAACI,KAAK,EAAEA;IAC1E;IAEA,MAAMW,OAAOZ,EAAU,EAAEa,aAA4B,EAAE;QACrD,OAAO,MAAM,IAAI,CAACnB,OAAO,CAACC,EAAE,CAACiB,MAAM,CAACf,iBAAK,EAAEiB,GAAG,CAACD,eAAeJ,KAAK,CAACC,IAAAA,cAAE,EAACb,iBAAK,CAACG,EAAE,EAAEA,KAAKD,SAAS;IACjG;IAEA,MAAMgB,OAAOf,EAAU,EAAE;QACvB,OAAO,MAAM,IAAI,CAACN,OAAO,CAACC,EAAE,CAACqB,MAAM,CAACnB,iBAAK,EAAEY,KAAK,CAACC,IAAAA,cAAE,EAACb,iBAAK,CAACG,EAAE,EAAEA,KAAKD,SAAS;IAC9E;IAhCAkB,YACE,AAAiBvB,OAAwB,CACzC;aADiBA,UAAAA;IACf;AA+BN"}